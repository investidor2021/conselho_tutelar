<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cálculo Pagamento - Conselho Tutelar</title>
	<style>
        .separador-demonstrativo {
            border: none;
            border-top: 2px dashed #007bff;
            margin: 25px 0;
        }
        .titulo-demonstrativo {
            font-size: 1.1em;
            font-weight: bold;
            color: #0056b3;
            margin-bottom: 15px;
            text-align: center;
        }
    </style>
    <link rel="stylesheet" href="style.css">
	
</head>

<body>

    <h1>Calculadora de Pagamento - Conselho Tutelar</h1>

    <div class="form-container">
      <form id="calcForm">

        <div class="form-grid">

            <div class="form-group">
                <label for="conselheiroNome">Nome do(a) Conselheiro(a):</label>
                 <input type="text" id="conselheiroNome" name="conselheiroNome" placeholder="Digite o nome ou selecione" list="listaConselheiros">
                 <datalist id="listaConselheiros">
                     <option value="BRUNA SIMOES GUTIERRES">
                     <option value="CLEIDE APARECIDA PATROCINIO CAVALARI">
                     <option value="CRISTINA ALVES CARDOSO">
                     <option value="ISABELA FACONI">
                     <option value="SONIA HELENA ROQUE DE CARVALHO">
                     <option value="FERNANDA ROBERTA DONNINI (Suplente)">
                     <option value="Outro(a) Suplente">
                 </datalist>
            </div>

             <div class="form-group">
                <label for="referencia">Mês/Ano Referência:</label>
                <input type="month" id="referencia" name="referencia" required>
            </div>

            <div class="form-group full-width">
                <div class="form-grid-compact">
                    <div class="form-group">
                        <label for="salarioBase" id="labelSalarioBase">Salário Base Mensal (R$):</label>
                        <input type="text" id="salarioBase" value="3.645,32" name="salarioBase" placeholder="Ex: 3.645,32" required inputmode="decimal">
                        <small>Use vírgula para centavos. Ex: 3000,00</small>
                    </div>
                    <div class="form-group">
                        <label for="tetoInssValor">Teto INSS Contribuição (R$):</label>
                        <input type="text" id="tetoInssValor" value="8.157,41" name="tetoInssValor" placeholder="Ex: 8.157,41" required inputmode="decimal">
                        <small>Use vírgula para centavos.</small>
                    </div>
                </div>
            </div>

             <div class="form-group full-width" id="groupFaltasContainer">
                <div class="form-grid-compact">
                    <div class="form-group" id="groupFaltas">
                        <label for="faltas">Dias de Falta (0-30):</label>
                        <input type="number" id="faltas" name="faltas" step="1" min="0" max="30" value="0" required>
                         <small>Máximo de 30 dias.</small>
                    </div>
                    <div></div>
                </div>
            </div>


             <div class="form-group checkbox-group full-width">
                  <div class="checkbox-item-container">
                      <div class="form-group checkbox-item" id="groupFeriasNormais">
                        <input type="checkbox" id="isFerias" name="isFerias">
                        <label for="isFerias">Pagamento de Férias (Sal. Mês + Sal. Férias Adiantado + 1/3)?</label>
                      </div>
                      <div class="form-group" id="groupDiasFerias" style="display:none; margin-left: 28px; margin-top: 5px; max-width: 200px;">
                          <label for="diasFeriasGozo">Duração das Férias:</label>
                          <select id="diasFeriasGozo" name="diasFeriasGozo">
                              <option value="30">30 dias</option>
                              <option value="15">15 dias</option>
                          </select>
                      </div>
                      <div class="form-group" id="groupDataInicioFerias" style="display:none; margin-left: 28px; margin-top: 10px;">
                          <label for="dataInicioFerias">Data de Início das Férias:</label>
                          <input type="date" id="dataInicioFerias" name="dataInicioFerias">
                          <div style="margin-top: 8px;">
                              <label>Data Fim (calculada):</label>
                              <span id="dataFimFerias" style="font-weight: bold;"></span>
                          </div>
                      </div>
                      <small class="info-ferias">Marcando esta opção, serão calculados: Salário do Mês Atual + Adiantamento do Salário do Mês de Férias (proporcional aos dias selecionados) + 1/3 sobre este adiantamento.</small>
                  </div>

                  <div class="checkbox-item-container">
                      <div class="form-group checkbox-item">
                          <input type="checkbox" id="isRescisao" name="isRescisao">
                          <label for="isRescisao">É Pagamento de Rescisão?</label>
                      </div>
                       <div class="info" id="infoRescisao" style="display:none;">
                         <strong>Cálculo de Rescisão:</strong> O INSS será 11% sobre Saldo de Salário e 13º. O campo "Dias de Falta" será desconsiderado.
                       </div>
                  </div>
             </div>

            <div id="rescisaoCampos" style="display: none;" class="form-group full-width">
                <h3>Detalhes da Rescisão</h3>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="saldoSalarioDias">Saldo de Salário (dias no mês):</label>
                        <select id="saldoSalarioDias" name="saldoSalarioDias">
                            <script>for (let i = 0; i <= 30; i++) { document.write(`<option value="${i}">${i} dia(s)</option>`); }</script>
                        </select>
                    </div>
                     <div class="form-group">
                        <label for="meses13">13º Salário Proporcional:</label>
                        <select id="meses13" name="meses13">
                            <script>for (let i = 0; i <= 12; i++) { document.write(`<option value="${i}">${i}/12 avos</option>`); }</script>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="mesesFeriasProp">Férias Proporcionais + 1/3:</label>
                         <select id="mesesFeriasProp" name="mesesFeriasProp">
                            <script>for (let i = 0; i <= 12; i++) { document.write(`<option value="${i}">${i}/12 avos</option>`); }</script>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="feriasVencidas">Férias Vencidas + 1/3 (R$):</label>
                        <input type="text" id="feriasVencidas" name="feriasVencidas" placeholder="Ex: 4.000,00" value="0" inputmode="decimal">
                    </div>
                    <div class="form-group checkbox-item">
                        <input type="checkbox" id="incluirAvisoPrevio" name="incluirAvisoPrevio">
                        <label for="incluirAvisoPrevio">Incluir Aviso Prévio Indenizado?</label>
                    </div>
                </div>
            </div>
			<div class="checkbox-item-container">
    <div class="form-group checkbox-item">
        <input type="checkbox" id="isDecimoTerceiro" name="isDecimoTerceiro">
        <label for="isDecimoTerceiro">É Pagamento de 13º Salário?</label>
    </div>
</div>

<div id="decimoTerceiroCampos" style="display: none;" class="form-group full-width">
    <h3>Detalhes do 13º Salário</h3>
    <div class="form-grid">
        <div class="form-group">
            <label>Tipo de Parcela:</label>
            <div class="radio-group">
                <input type="radio" id="primeiraParcela" name="tipoParcela13" value="primeira" checked>
                <label for="primeiraParcela">1ª Parcela (Adiantamento)</label>
            </div>
            <div class="radio-group">
                <input type="radio" id="segundaParcela" name="tipoParcela13" value="segunda">
                <label for="segundaParcela">2ª Parcela (Pagamento Final)</label>
            </div>
        </div>
        <div class="form-group">
            <label for="meses13Avos">Proporcional a:</label>
            <select id="meses13Avos" name="meses13Avos">
                <script>for (let i = 1; i <= 12; i++) { document.write(`<option value="${i}">${i}/12 avos</option>`); }</script>
            </select>
        </div>
        <div class="form-group" id="groupAdiantamentoPago" style="display:none;">
            <label for="valorAdiantamentoPago">Valor do Adiantamento (1ª Parcela) já pago (R$):</label>
            <input type="text" id="valorAdiantamentoPago" name="valorAdiantamentoPago" placeholder="Ex: 1500,00" value="0" inputmode="decimal">
        </div>
    </div>
</div>
       </div>

        <div id="infoBloqueio" class="info-bloqueio" style="display: none;"></div>

        <button type="button" id="btnCalcular">Calcular</button>
      </form>
     </div>

    <div id="divResultado" class="results-container" style="display: none;">
         <h2>Resumo do Cálculo</h2>
         <div id="resultado"></div>
         <button type="button" id="btnPdf">Gerar PDF</button>
         <button type="button" id="btnSalvarFirebase" style="display: none;">Salvar no Banco de Dados</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>

  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";
  import { getFirestore, collection, addDoc, serverTimestamp, getDocs, query, where } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBfzOkxS60B8Op-mPJF60RaaYiO7I9R--M",
    authDomain: "conselhotutelar-e74c5.firebaseapp.com",
    projectId: "conselhotutelar-e74c5",
    storageBucket: "conselhotutelar-e74c5.firebasestorage.app",
    messagingSenderId: "761196089209",
    appId: "1:761196089209:web:d902bd31af9f30736c69a8",
    measurementId: "G-CQELXX0YRH"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  const db = getFirestore(app);
  window.db = db;
  window.firestoreFunctions = { collection, addDoc, serverTimestamp, getDocs, query, where };
</script>

</body>
</html>

